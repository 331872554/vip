<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ç®¡ç†åå°</title>
    <!-- ä½¿ç”¨æœ¬åœ°å­—ä½“æ–‡ä»¶ -->
    <style>
        @font-face {
            font-family: 'Admin Font';
            src: local('Arial');
            font-display: swap;
        }
    </style>
    <!-- ä½¿ç”¨æœ¬åœ° Font Awesome -->
    <link rel="stylesheet" href="/fontawesome/css/all.min.css">
    <style>
        :root {
            --primary-color: #4361ee;
            --primary-light: #eef2ff;
            --success-color: #2ecc71;
            --warning-color: #f39c12;
            --danger-color: #e74c3c;
            --text-primary: #2d3748;
            --text-secondary: #4a5568;
            --text-light: #718096;
            --border-color: #e2e8f0;
            --bg-gray: #f7fafc;
            --header-height: 70px;
            --sidebar-width: 240px;
            --card-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --transition: all 0.3s ease;
        }

        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Admin Font', sans-serif;
            margin: 0;
            min-height: 100vh;
            background-color: var(--bg-gray);
            color: var(--text-primary);
        }

        /* é¡¶éƒ¨å¯¼èˆªæ  */
        header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: var(--header-height);
            background: white;
            box-shadow: var(--card-shadow);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0;
            z-index: 1000;
        }

        .header-left {
            display: flex;
            align-items: center;
            padding-left: 50px;  /* è°ƒæ•´å·¦ä¾§é—´è·ï¼Œå¯ä»¥æ ¹æ®éœ€è¦ä¿®æ”¹è¿™ä¸ªå€¼ */
        }

        .header-left h1 {
            font-size: 22px;
            font-weight: 600;
            color: var(--primary-color);
            margin: 0;
            padding: 0;  /* ç§»é™¤å†…è¾¹è· */
        }

        .header-right {
            display: flex;
            align-items: center;
            padding-right: 50px;  /* è°ƒæ•´å³ä¾§é—´è· */
        }

        .logout-btn {
            padding: 8px 18px;
            border-radius: 8px;
            background-color: var(--danger-color);
            color: white;
            border: none;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: var(--transition);
            box-shadow: 0 2px 4px rgba(231, 76, 60, 0.2);
        }

        .logout-btn:hover {
            background-color: #c0392b;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(231, 76, 60, 0.3);
        }

        .logout-btn i {
            margin-right: 8px;
        }

        /* ä¸»å®¹å™¨ */
        .container {
            margin-top: var(--header-height);
            display: flex;
            min-height: calc(100vh - var(--header-height));
        }

        /* ä¾§è¾¹æ  */
        .sidebar {
            position: fixed;
            width: var(--sidebar-width);
            height: calc(100vh - var(--header-height));
            background: transparent;
            overflow-y: auto;
            padding: 30px 20px;
            display: flex;
            justify-content: center;
            z-index: 100;
        }

        .tabs {
            display: flex;
            flex-direction: column;
            width: 100%;
            background: white;
            border-radius: 12px;
            box-shadow: var(--card-shadow);
            overflow: hidden;
        }

        .tab {
            padding: 14px 20px;
            cursor: pointer;
            transition: var(--transition);
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 15px;
            font-weight: 500;
            border-left: 3px solid transparent;
            position: relative;
        }

        .tab:not(:last-child) {
            border-bottom: 1px solid var(--border-color);
        }

        .tab i {
            font-size: 18px;
            width: 24px;
            text-align: center;
            color: var(--text-light);
            transition: var(--transition);
        }

        .tab:hover {
            background-color: var(--primary-light);
            color: var(--primary-color);
        }

        .tab:hover i {
            color: var(--primary-color);
        }

        .tab.active {
            background-color: var(--primary-light);
            color: var(--primary-color);
            border-left-color: var(--primary-color);
        }

        .tab.active i {
            color: var(--primary-color);
        }

        /* ä¸»å†…å®¹åŒºåŸŸ */
        .main-content {
            margin-left: var(--sidebar-width);
            padding: 30px;
            width: calc(100% - var(--sidebar-width));
            background-color: transparent;
            min-height: calc(100vh - var(--header-height));
            display: flex;
            flex-direction: column;
        }

        /* é¡µé¢æ ‡é¢˜åŒºåŸŸ */
        .page-header {
            margin-bottom: 30px;
            padding: 20px 30px;
            background: white;
            border-radius: 12px;
            box-shadow: var(--card-shadow);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .page-title {
            font-size: 22px;
            font-weight: 600;
            color: var(--text-primary);
            margin: 0;
        }

        /* å†…å®¹åŒºåŸŸ */
        .tab-content {
            flex: 1;
            display: none;
        }

        .tab-content.active {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* è¡¨å•åŒºåŸŸ */
        .form-section {
            background: white;
            border-radius: 12px;
            box-shadow: var(--card-shadow);
            padding: 30px 40px;  /* å¢åŠ å·¦å³å†…è¾¹è· */
            margin-bottom: 30px;
            width: 100%;
            max-width: 800px;
        }

        .form-section h3 {
            color: var(--text-primary);
            font-size: 18px;
            margin-top: 0;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
        }

        /* å¡ç‰‡æ ·å¼ */
        .card {
            background: white;
            border-radius: 12px;
            box-shadow: var(--card-shadow);
            margin-bottom: 30px;
            width: 100%;
            overflow: hidden;
        }

        .card-header {
            padding: 20px 30px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .card-body {
            padding: 30px;
        }

        /* è¡¨æ ¼æ ·å¼ */
        table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            border: none;
        }

        th {
            background: var(--bg-gray);
            padding: 16px 20px;
            font-weight: 600;
            color: var(--text-secondary);
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        td {
            padding: 16px 20px;
            border-bottom: 1px solid var(--border-color);
            vertical-align: middle;
        }

        tr:last-child td {
            border-bottom: none;
        }

        tr:hover {
            background-color: var(--primary-light);
        }

        /* æŒ‰é’®æ ·å¼ */
        .btn {
            height: 40px;
            padding: 0 20px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }

        .btn i {
            margin-right: 8px;
        }

        .btn-primary {
            background: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background: #3651d4;
        }

        .btn-success {
            background: var(--success-color);
            color: white;
        }

        .btn-danger {
            background: var(--danger-color);
            color: white;
        }

        .save-btn {
            background: var(--primary-color);
            color: white;
            padding: 12px 30px;  /* å¢åŠ æŒ‰é’®çš„å·¦å³å†…è¾¹è· */
            border-radius: 8px;
            border: none;
            font-size: 15px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: 0 2px 4px rgba(67, 97, 238, 0.2);
            width: auto;  /* æŒ‰é’®å®½åº¦è‡ªé€‚åº”å†…å®¹ */
            min-width: 20px;  /* è®¾ç½®æœ€å°å®½åº¦ */
        }

        .save-btn:hover {
            background: #3651d4;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(67, 97, 238, 0.3);
        }

        /* è¡¨å•ç»„ä»¶æ ·å¼ */
        .form-group {
            margin-bottom: 25px;
            padding: 10px 15px;  /* æ·»åŠ è¾“å…¥æ¡†ç»„çš„å·¦å³å†…è¾¹è· */
        }

        label {
            display: block;
            margin-bottom: 10px;
            color: var(--text-secondary);
            font-size: 14px;
            font-weight: 500;
            padding-left: 5px;  /* æ ‡ç­¾æ–‡å­—å·¦ä¾§ç¼©è¿› */
        }

        input, select, textarea {
            width: 100%;
            padding: 12px 15px;  /* å¢åŠ è¾“å…¥æ¡†å†…éƒ¨å·¦å³é—´è· */
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-size: 14px;
            transition: var(--transition);
            background-color: #fff;
            color: var(--text-primary);
            margin: 0;  /* é‡ç½®å¤–è¾¹è· */
        }

        input:focus, select:focus, textarea:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.15);
            outline: none;
        }

        /* æœç´¢æ¡†æ ·å¼ */
        .search-box {
            display: flex;
            align-items: center;
            gap: 10px;
            width: 400px;  /* å¢åŠ æœç´¢æ¡†å®½åº¦ */
            margin-right: 20px;
        }

        .search-box input {
            flex: 1;
            padding: 10px 15px;  /* è°ƒæ•´å†…è¾¹è·ä½¿æœç´¢æ¡†æ›´é«˜ */
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-size: 14px;
            min-width: 300px;  /* è®¾ç½®æœ€å°å®½åº¦ */
        }

        .search-box input:focus {
            background-color: white;
            border: 1px solid var(--primary-color);
        }

        .search-box i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-light);
        }

        /* åˆ†é¡µæ ·å¼ */
        .pagination {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 30px;
        }

        .page-btn {
            padding: 8px 16px;
            border: 1px solid var(--border-color);
            background-color: white;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
        }

        .page-btn:hover {
            background-color: var(--primary-light);
            border-color: var(--primary-color);
            color: var(--primary-color);
        }

        .page-btn.active {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
            color: white;
        }

        /* æ¨¡æ€æ¡†æ ·å¼ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background-color: white;
            padding: 30px;
            border-radius: 12px;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
            position: relative;
        }

        .close-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 24px;
            cursor: pointer;
            color: var(--text-light);
            transition: var(--transition);
        }

        .close-btn:hover {
            color: var(--danger-color);
        }

        /* è¿›åº¦æ¡æ ·å¼ */
        .progress-bar {
            height: 8px;
            background-color: var(--bg-gray);
            border-radius: 4px;
            margin-top: 15px;
            overflow: hidden;
            display: none;
        }

        .progress {
            height: 100%;
            background-color: var(--primary-color);
            width: 0%;
            transition: width 0.3s;
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            :root {
                --sidebar-width: 260px;
                --header-height: 60px;
            }

            .sidebar {
                position: fixed;
                left: -100%;
                width: var(--sidebar-width);
                height: 100%;
                background: white;
                z-index: 1001;
                transition: left 0.3s ease;
            }

            .sidebar.active {
                left: 0;
            }

            .main-content {
                margin-left: 0;
                padding: 15px;
                width: 100%;
            }

            /* æ·»åŠ èœå•æŒ‰é’® */
            .menu-toggle {
                display: block;
                position: fixed;
                top: 15px;
                left: 15px;
                z-index: 1001;
                background: var(--primary-color);
                color: white;
                border: none;
                border-radius: 4px;
                padding: 8px;
                cursor: pointer;
            }

            /* é®ç½©å±‚ */
            .sidebar-overlay {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.5);
                z-index: 99;
            }

            .sidebar-overlay.active {
                display: block;
            }

            /* è°ƒæ•´å¤´éƒ¨æ ·å¼ */
            .header-left {
                padding-left: 50px;  /* ä¸ºèœå•æŒ‰é’®ç•™å‡ºç©ºé—´ */
            }

            .header-left h1 {
                font-size: 18px;
            }

            .header-right {
                padding-right: 10px;
            }

            .logout-btn {
                padding: 6px 12px;
                font-size: 13px;
            }

            /* è°ƒæ•´è¡¨æ ¼å“åº”å¼ */
            .card-body {
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;  /* iOS æ»šåŠ¨ä¼˜åŒ– */
            }

            table {
                min-width: 500px;
            }

            .tabs {
                flex-direction: column;
                width: 100%;
            }

            .tab:not(:last-child) {
                border-right: none;
                border-bottom: 1px solid var(--border-color);
            }

            .submenu {
                position: static;
                width: 100%;
            }

            .search-box {
                width: 100%;
                margin-right: 0;
                margin-bottom: 10px;
            }

            .search-box input {
                width: 100%;
                min-width: unset;
            }
        }

        #login-container.login-container {
            display: flex;
            justify-content: flex-end;  /* å°†ç™»å½•æ¡†ç§»è‡³å³ä¾§ */
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #4361ee 0%, #3651d3 100%);
            padding: 20px;
        }
        
        @keyframes fadeIn {
            to { opacity: 1; }
        }

        .form-actions {
            display: flex;
            justify-content: center;
            margin-top: 30px;
            padding: 20px;
            background: white;
            border-radius: 12px;
            box-shadow: var(--card-shadow);
            width: 100%;
            max-width: 800px;
        }

        .form-actions .btn {
            min-width: 120px;
            height: 44px;
            font-size: 15px;
        }

        .form-actions .btn i {
            font-size: 16px;
            margin-right: 8px;
        }

        .batch-actions {
            margin-bottom: 20px;
        }

        .video-checkbox {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        #select-all {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        /* ä¿®æ”¹è§†é¢‘ç®¡ç†é¡µé¢çš„å·¥å…·æ æ ·å¼ */
        .tools-container {
            display: flex;
            align-items: center;
            justify-content: space-between;  /* å¹³å‡åˆ†é…ç©ºé—´ */
            margin-bottom: 20px;
            padding: 20px;
            background: white;
            border-radius: 12px;
            box-shadow: var(--card-shadow);
        }

        /* å­èœå•æ ·å¼ */
        .submenu {
            display: none;
            padding: 10px 0;
            background: var(--bg-gray);
            border-top: 1px solid var(--border-color);
            position: absolute;
            top: 100%;
            left: 0;
            width: 100%;  /* ä½¿ç”¨å…¨å®½ */
            z-index: 1000;
            box-shadow: var(--card-shadow);
        }

        .tab.active .submenu {
            display: block;
        }

        .submenu-item {
            padding: 10px 20px;
            cursor: pointer;
            color: var(--text-secondary);
            font-size: 13px;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: var(--transition);
        }

        .submenu-item:hover {
            color: var(--primary-color);
            background: var(--primary-light);
        }

        .submenu-item.active {
            color: var(--primary-color);
            background: var(--primary-light);
        }

        .submenu-item i {
            font-size: 18px;
            width: 24px;
            text-align: center;
        }

        /* è®¾ç½®é¡µé¢å†…å®¹åŒºåŸŸ */
        .settings-content {
            display: none;
        }

        .settings-content.active {
            display: block;
        }

        /* ç™»å½•é¡µé¢æ ·å¼ */
        .login-container {
            display: flex;
            justify-content: flex-end;  /* å°†ç™»å½•æ¡†ç§»è‡³å³ä¾§ */
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #4361ee 0%, #3651d3 100%);
            padding: 20px;
        }

        .login-form {
            background: white;
            padding: 50px 40px;
            border-radius: 16px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
            width: 100%;
            max-width: 400px;
            margin-right: 100px;  /* æ·»åŠ å³ä¾§é—´è· */
            position: relative;
            animation: slideUp 0.5s ease;
        }

        .login-form h2 {
            color: var(--text-primary);
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 30px;
            text-align: center;
            position: relative;
            padding-bottom: 15px;
        }

        .login-form h2::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 3px;
            background: var(--primary-color);
            border-radius: 3px;
        }

        .login-form .form-group {
            margin-bottom: 25px;
            position: relative;
            display: flex;
            justify-content: center;
        }

        .login-form input {
            width: 260px;  /* è®¾ç½®è¾“å…¥æ¡†å›ºå®šå®½åº¦ */
            padding: 14px 20px 14px 45px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 15px;
            color: var(--text-primary);
            transition: var(--transition);
            background: white;
        }

        .login-form input:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.1);
        }

        .login-form .form-group i {
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-light);
            font-size: 16px;
            transition: var(--transition);
        }

        .login-form .form-group:focus-within i {
            color: var(--primary-color);
        }

        .login-btn {
            width: 260px;
            margin: 0 auto;
            padding: 16px;
            border: none;
            border-radius: 8px;
            background: var(--primary-color);
            color: white;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: 0 8px 16px rgba(67, 97, 238, 0.25);
            margin-top: 10px;
            display: block;  /* ç¡®ä¿æŒ‰é’®æ˜¯å—çº§å…ƒç´  */
        }

        .login-btn:hover {
            background: #3651d3;
            transform: translateY(-2px);
            box-shadow: 0 12px 20px rgba(67, 97, 238, 0.35);
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* ä¿å­˜æŒ‰é’®å®¹å™¨ */
        .form-section .btn-container {
            padding: 0 15px;  /* ä¸è¾“å…¥æ¡†ç»„ä¿æŒä¸€è‡´çš„å·¦å³å†…è¾¹è· */
            margin-top: 30px;
        }

        /* å“åº”å¼è°ƒæ•´ */
        @media (max-width: 768px) {
            .login-container {
                justify-content: center;  /* åœ¨ç§»åŠ¨ç«¯å±…ä¸­æ˜¾ç¤º */
            }
            
            .login-form {
                margin-right: 0;  /* ç§»é™¤å³ä¾§é—´è· */
            }
        }

        /* è¶…å°å±å¹•é€‚é… */
        @media (max-width: 375px) {
            .header-left h1 {
                font-size: 16px;
            }

            .logout-btn {
                padding: 5px 10px;
                font-size: 12px;
            }

            .login-form input {
                width: 220px;
            }

            .login-btn {
                width: 220px;
            }
        }

        /* æ·»åŠ è§¦æ‘¸ä¼˜åŒ– */
        @media (hover: none) {
            .btn:active {
                transform: scale(0.98);
            }

            .tab:active,
            .submenu-item:active {
                background-color: var(--primary-light);
            }
        }

        /* æš—é»‘æ¨¡å¼æ”¯æŒ */
        @media (prefers-color-scheme: dark) {
            body {
                background-color: #1a1a1a;
                color: #ffffff;
            }

            .card,
            .modal-content,
            .sidebar,
            header {
                background-color: #2d2d2d;
            }

            input, select, textarea {
                background-color: #333333;
                color: #ffffff;
                border-color: #4a4a4a;
            }
        }

        /* å®‰å…¨åŒºåŸŸé€‚é… (iPhone X åŠä»¥ä¸Š) */
        @supports (padding: max(0px)) {
            .header {
                padding-top: max(var(--header-height), env(safe-area-inset-top));
            }

            .sidebar {
                padding-bottom: env(safe-area-inset-bottom);
            }

            .main-content {
                padding-bottom: max(20px, env(safe-area-inset-bottom));
            }
        }

        /* å“åº”å¼å¸ƒå±€è°ƒæ•´ */
        @media (max-width: 768px) {
            /* å¤´éƒ¨æ ·å¼è°ƒæ•´ */
            header {
                padding: 0 15px;
            }

            .header-left {
                padding-left: 60px;  /* ä¸ºç§»åŠ¨ç«¯èœå•æŒ‰é’®ç•™å‡ºç©ºé—´ */
            }

            .header-left h1 {
                font-size: 18px;
                padding: 0;
            }

            .header-right {
                padding-right: 15px;
            }

            .logout-btn {
                padding: 6px 12px;
                font-size: 13px;
            }

            /* ä¾§è¾¹æ è°ƒæ•´ */
            .sidebar {
                position: fixed;
                left: -100%;
                width: 80%;
                max-width: 300px;
                height: 100%;
                transition: left 0.3s ease;
                z-index: 1001;
                background: white;
            }

            .sidebar.active {
                left: 0;
            }

            /* é®ç½©å±‚ */
            .sidebar-overlay {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.5);
                z-index: 1000;
            }

            .sidebar-overlay.active {
                display: block;
            }

            /* ä¸»å†…å®¹åŒºåŸŸè°ƒæ•´ */
            .main-content {
                margin-left: 0;
                padding: 20px 15px;
                width: 100%;
            }

            /* å·¥å…·æ è°ƒæ•´ */
            .tools-container {
                flex-direction: column;
                gap: 15px;
                padding: 15px;
            }

            .search-box {
                width: 100%;
                order: -1;  /* æœç´¢æ¡†æ”¾åœ¨æœ€ä¸Šé¢ */
                margin-right: 0;
            }

            .search-box input {
                width: 100%;
                min-width: unset;
            }

            /* æŒ‰é’®è°ƒæ•´ */
            .btn {
                width: 100%;  /* æŒ‰é’®å æ»¡å®½åº¦ */
                margin-bottom: 10px;
            }

            /* è¡¨æ ¼å“åº”å¼ */
            .card-body {
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;  /* iOS æ»šåŠ¨ä¼˜åŒ– */
            }

            #videos-table {
                min-width: 600px;  /* ç¡®ä¿è¡¨æ ¼å†…å®¹å®Œæ•´æ˜¾ç¤º */
            }

            /* è¡¨å•åŒºåŸŸè°ƒæ•´ */
            .form-section {
                padding: 20px 15px;
            }

            .form-group {
                margin-bottom: 20px;
            }

            /* ä¸Šä¼ æ¨¡æ€æ¡†è°ƒæ•´ */
            .modal-content {
                width: 90%;
                margin: 20px auto;
                padding: 20px;
                max-height: 80vh;
            }

            /* åˆ†é¡µæŒ‰é’®è°ƒæ•´ */
            .pagination {
                flex-wrap: wrap;
                justify-content: center;
                gap: 8px;
            }

            .page-btn {
                padding: 8px 12px;
                min-width: 36px;
            }
        }

        /* è¶…å°å±å¹•é€‚é… (iPhone SE ç­‰) */
        @media (max-width: 375px) {
            .header-left h1 {
                font-size: 16px;
            }

            .logout-btn {
                padding: 5px 10px;
                font-size: 12px;
            }

            .modal-content {
                padding: 15px;
            }

            .form-group label {
                font-size: 14px;
            }

            .login-form input,
            .login-btn {
                width: 220px;
            }
        }

        /* è§¦æ‘¸è®¾å¤‡ä¼˜åŒ– */
        @media (hover: none) {
            .btn:active,
            .tab:active,
            .page-btn:active {
                transform: scale(0.98);
            }

            .form-section input:focus,
            .form-section select:focus,
            .form-section textarea:focus {
                font-size: 16px;  /* é˜²æ­¢ iOS ç¼©æ”¾ */
            }
        }

        /* iOS å®‰å…¨åŒºåŸŸé€‚é… */
        @supports (padding: max(0px)) {
            .header {
                padding-top: max(0px, env(safe-area-inset-top));
            }

            .sidebar {
                padding-bottom: max(0px, env(safe-area-inset-bottom));
            }

            .main-content {
                padding-bottom: max(20px, env(safe-area-inset-bottom));
            }
        }

        /* è§†é¢‘ç½‘æ ¼å¸ƒå±€ä¼˜åŒ– */
        .video-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            padding: 10px;
            width: 100%;
        }

        /* è§†é¢‘å¡ç‰‡æ ·å¼ä¼˜åŒ– */
        .video-card {
            background: white;
            border-radius: 12px;
            box-shadow: var(--card-shadow);
            overflow: hidden;
            position: relative;
            transition: transform 0.2s, box-shadow 0.2s;
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .video-card .card-body {
            padding: 15px;
            display: flex;
            flex-direction: column;
            flex: 1;
        }

        .video-info {
            margin-bottom: 10px;
        }

        .action-buttons {
            margin-top: auto; /* å°†æŒ‰é’®æ¨åˆ°åº•éƒ¨ */
        }

        /* è§†é¢‘å®¹å™¨æ ·å¼ä¼˜åŒ– - è¿›ä¸€æ­¥è°ƒæ•´ */
        .video-wrapper {
            position: relative;
            padding-bottom: 56.25%; /* æ¢å¤æ ‡å‡† 16:9 æ¯”ä¾‹ */
            height: 0;
            overflow: hidden;
            margin-bottom: 10px; /* æ·»åŠ åº•éƒ¨é—´è· */
        }

        .video-wrapper video {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: contain; /* æ”¹ä¸º contain ç¡®ä¿è§†é¢‘å®Œæ•´æ˜¾ç¤º */
            background-color: #000; /* æ·»åŠ é»‘è‰²èƒŒæ™¯ */
        }

        /* ç§»åŠ¨ç«¯é€‚é…ä¼˜åŒ– */
        @media (max-width: 768px) {
            .video-grid {
                grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
                gap: 15px;
            }
            
            .video-wrapper {
                padding-bottom: 35%; /* åœ¨ç§»åŠ¨ç«¯è¿›ä¸€æ­¥é™ä½é«˜åº¦æ¯”ä¾‹ */
            }
            
            .video-wrapper video {
                max-height: 120px; /* ç§»åŠ¨ç«¯è¿›ä¸€æ­¥é™åˆ¶æœ€å¤§é«˜åº¦ */
            }
        }

        @media (max-width: 480px) {
            .video-grid {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
                gap: 10px;
            }
            
            .video-wrapper {
                padding-bottom: 30%; /* åœ¨å°å±å¹•æ‰‹æœºä¸Šæ›´è¿›ä¸€æ­¥é™ä½é«˜åº¦æ¯”ä¾‹ */
            }
            
            .video-wrapper video {
                max-height: 100px; /* å°å±å¹•æ‰‹æœºä¸Šè¿›ä¸€æ­¥é™åˆ¶æœ€å¤§é«˜åº¦ */
            }
        }

        /* è§†é¢‘å¡ç‰‡ä¸­çš„å¤é€‰æ¡†æ ·å¼ */
        .video-checkbox-wrapper {
            position: absolute;
            top: 10px;
            left: 10px;
            z-index: 2;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 4px;
            padding: 4px;
        }

        .video-checkbox {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div id="login-container" class="login-container" style="display: none;">
        <div class="login-form">
            <h2>ç®¡ç†å‘˜ç™»å½•</h2>
            <div class="form-group">
                <i class="fas fa-user"></i>
                <input type="text" id="username" placeholder="è¯·è¾“å…¥ç®¡ç†å‘˜è´¦å·">
            </div>
            <div class="form-group">
                <i class="fas fa-lock"></i>
                <input type="password" id="password" placeholder="è¯·è¾“å…¥ç®¡ç†å‘˜å¯†ç ">
            </div>
            <button class="login-btn" onclick="login()">ç™»å½•</button>
        </div>
    </div>

    <div id="admin-container" style="display: none;">
        <button class="menu-toggle" onclick="toggleSidebar()">
            <i class="fas fa-bars"></i>
        </button>
        <div class="sidebar-overlay" onclick="toggleSidebar()"></div>

        <header>
            <div class="header-left">
                <h1>ç®¡ç†åå°</h1>
            </div>
            <div class="header-right">
                <button class="logout-btn" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i> é€€å‡ºç™»å½•
                </button>
            </div>
        </header>

        <div class="container">
            <!-- ä¾§è¾¹æ èœå• -->
            <div class="sidebar">
                <div class="tabs">
                    <div class="tab active" onclick="switchTab('videos', this)">
                        <i class="fas fa-video"></i> è§†é¢‘ç®¡ç†
                    </div>
                    <div class="tab" onclick="switchTab('settings', this)">
                        <i class="fas fa-cog"></i> ç½‘ç«™è®¾ç½®
                        <div class="submenu">
                            <div class="submenu-item" onclick="switchSettingsTab('index', event)">
                                <i class="fas fa-home"></i> é¦–é¡µ
                            </div>
                            <div class="submenu-item" onclick="switchSettingsTab('password', event)">
                                <i class="fas fa-key"></i> å¯†ç é¡µé¢
                            </div>
                            <div class="submenu-item" onclick="switchSettingsTab('ad', event)">
                                <i class="fas fa-ad"></i> å¹¿å‘Šé¡µé¢
                            </div>
                            <div class="submenu-item" onclick="switchSettingsTab('videos', event)">
                                <i class="fas fa-play"></i> è§†é¢‘é¡µé¢
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
            <div class="main-content">
                <!-- é¡µé¢æ ‡é¢˜å’Œæ“ä½œåŒº -->
                <div class="page-header">
                    <h1 class="page-title" id="currentPageTitle">è§†é¢‘ç®¡ç†</h1>
                    <div class="page-actions">
                        <!-- æ ¹æ®ä¸åŒé¡µé¢æ˜¾ç¤ºä¸åŒçš„æ“ä½œæŒ‰é’® -->
                    </div>
                </div>

                <!-- è§†é¢‘ç®¡ç†é¡µé¢ -->
                <div id="videos-tab" class="tab-content" style="display: block;">
                    <div class="card">
                        <div class="card-header">
                            <h3>è§†é¢‘åˆ—è¡¨</h3>
                            <div class="tools-container">
                                <div class="search-box">
                                    <input type="text" placeholder="æœç´¢è§†é¢‘..." oninput="filterVideos(this.value)">
                                </div>
                                <button class="btn btn-primary" onclick="showUploadModal()">
                                    <i class="fas fa-upload"></i> ä¸Šä¼ è§†é¢‘
                                </button>
                                <button class="btn btn-danger" onclick="deleteSelectedVideos()">
                                    <i class="fas fa-trash"></i> æ‰¹é‡åˆ é™¤
                                </button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="video-grid">
                                <!-- è§†é¢‘å¡ç‰‡å°†åœ¨è¿™é‡ŒåŠ¨æ€åŠ è½½ -->
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- ç½‘ç«™è®¾ç½®é¡µé¢ -->
                <div id="settings-tab" class="tab-content" style="display: none;">
                    <div id="index-settings" class="settings-content active">
                        <div class="form-section">
                            <h3>é¦–é¡µè®¾ç½®</h3>
                            <div class="form-group">
                                <label for="index-title">æ ‡é¢˜</label>
                                <input type="text" id="index-title" value="å‘±å‘±åŸºåœ°">
                            </div>
                            <div class="form-group">
                                <label>æ—¥æœŸæ–‡æœ¬</label>
                                <input type="text" id="index-date-text" value="æ•™ç¨‹åˆé›†">
                            </div>
                            <div class="form-group">
                                <label>å¯†ç è¾“å…¥æ¡†æç¤ºæ–‡å­—</label>
                                <input type="text" id="index-password-placeholder" value="è¾“å…¥å¯†ç è§‚çœ‹">
                            </div>
                            <div class="form-group">
                                <label>è·å–å¯†ç æŒ‰é’®æ–‡å­—</label>
                                <input type="text" id="index-get-password-btn" value="è·å–å¯†ç ">
                            </div>
                        </div>
                    </div>

                    <div id="password-settings" class="settings-content">
                        <div class="form-section">
                            <h3>å¯†ç é¡µé¢è®¾ç½®</h3>
                            <div class="form-group">
                                <label for="password-title">æ ‡é¢˜</label>
                                <input type="text" id="password-title">
                            </div>
                            <div class="form-group">
                                <label>é¡µé¢æè¿°</label>
                                <input type="text" id="password-description" value="ç‚¹å‡»"å¼€å§‹è§£é”"ï¼Œè§‚çœ‹æ¿€åŠ±å¹¿å‘Šåè‡ªåŠ¨è§£é”å¯†ç ğŸ”“ï¼">
                            </div>
                            <div class="form-group">
                                <label>é¡µé¢æ³¨é‡Š</label>
                                <input type="text" id="password-note" value="(æ›´æ–°ä¸æ˜“ï¼Œè°¢è°¢æ”¯æŒï¼)">
                            </div>
                            <div class="form-group">
                                <label>è§£é”æŒ‰é’®æ–‡å­—</label>
                                <input type="text" id="password-unlock-btn" value="å¼€å§‹è§£é”">
                            </div>
                        </div>
                    </div>

                    <div id="ad-settings" class="settings-content">
                        <div class="form-section">
                            <h3>å¹¿å‘Šé¡µé¢è®¾ç½®</h3>
                            <div class="form-group">
                                <label for="ad-title">æ ‡é¢˜</label>
                                <input type="text" id="ad-title">
                            </div>
                            <div class="form-group">
                                <label>å¹¿å‘Šå®Œæˆæç¤ºæ–‡å­—</label>
                                <input type="text" id="ad-complete-text" value="å¹¿å‘Šè§‚çœ‹å®Œæˆï¼Œæ‚¨çš„å¯†ç æ˜¯:">
                            </div>
                        </div>
                    </div>

                    <div id="videos-settings" class="settings-content">
                        <div class="form-section">
                            <h3>è§†é¢‘é¡µé¢è®¾ç½®</h3>
                            <div class="form-group">
                                <label for="videos-title">æ ‡é¢˜</label>
                                <input type="text" id="videos-title">
                            </div>
                            <div class="form-group">
                                <label>æœç´¢æ¡†æç¤ºæ–‡å­—</label>
                                <input type="text" id="videos-search-placeholder" value="æœç´¢è§†é¢‘...">
                            </div>
                            <div class="form-group">
                                <label>å…¨éƒ¨åˆ†ç±»æ–‡å­—</label>
                                <input type="text" id="videos-category-all" value="å…¨éƒ¨">
                            </div>
                            <div class="form-group">
                                <label>å…¥é—¨åˆ†ç±»æ–‡å­—</label>
                                <input type="text" id="videos-category-beginner" value="å…¥é—¨æ•™ç¨‹">
                            </div>
                            <div class="form-group">
                                <label>è¿›é˜¶åˆ†ç±»æ–‡å­—</label>
                                <input type="text" id="videos-category-advanced" value="è¿›é˜¶æ•™ç¨‹">
                            </div>
                            <div class="form-group">
                                <label>æš‚æ— è§†é¢‘æç¤ºæ–‡å­—</label>
                                <input type="text" id="videos-no-video" value="æš‚æ— è§†é¢‘">
                            </div>
                        </div>
                    </div>

                    <!-- ä¿å­˜æŒ‰é’®å§‹ç»ˆæ˜¾ç¤ºåœ¨åº•éƒ¨ -->
                    <div class="form-actions">
                        <button class="btn btn-primary" onclick="saveContent()">
                            <i class="fas fa-save"></i> ä¿å­˜ä¿®æ”¹
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- ç¼–è¾‘è§†é¢‘å¼¹çª— -->
    <div id="edit-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal()">&times;</span>
            <h2>ç¼–è¾‘è§†é¢‘</h2>
            
            <div class="form-group">
                <label for="edit-title">è§†é¢‘æ ‡é¢˜</label>
                <input type="text" id="edit-title">
            </div>
            
            <div class="form-group">
                <label for="edit-description">è§†é¢‘æè¿°</label>
                <textarea id="edit-description"></textarea>
            </div>
            
            <div class="form-group">
                <label for="edit-category">è§†é¢‘åˆ†ç±»</label>
                <select id="edit-category">
                    <option value="beginner">å…¥é—¨æ•™ç¨‹</option>
                    <option value="advanced">è¿›é˜¶æ•™ç¨‹</option>
                </select>
            </div>
            
            <input type="hidden" id="edit-id">
            <button class="save-btn" onclick="updateVideo()">ä¿å­˜ä¿®æ”¹</button>
        </div>
    </div>

    <!-- æ·»åŠ ä¸Šä¼ è§†é¢‘å¼¹çª— -->
    <div id="upload-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeUploadModal()">&times;</span>
            <h3>ä¸Šä¼ è§†é¢‘</h3>
            <form id="uploadForm">
                <div class="form-group">
                    <label for="upload-title">è§†é¢‘æ ‡é¢˜</label>
                    <input type="text" id="upload-title" required>
                </div>
                <div class="form-group">
                    <label for="upload-description">è§†é¢‘æè¿°ï¼ˆå¯é€‰ï¼‰</label>
                    <textarea id="upload-description"></textarea>
                </div>
                <div class="form-group">
                    <label for="upload-category">åˆ†ç±»</label>
                    <select id="upload-category">
                        <option value="beginner">æœ€æ–°</option>
                        <option value="advanced">å¾€æœŸ</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="upload-video">é€‰æ‹©è§†é¢‘</label>
                    <input type="file" id="upload-video" name="video" accept="video/*" class="form-control" multiple>
                </div>
                <div id="upload-progress-bar" class="progress-bar">
                    <div id="upload-progress" class="progress"></div>
                </div>
                <div id="upload-status"></div>
                <button type="submit" class="btn btn-primary">ä¸Šä¼ </button>
            </form>
        </div>
    </div>

    <script>
        // å…¨å±€å˜é‡
        let videos = [];
        let currentPage = 1;
        let itemsPerPage = 10;
        let filteredVideos = [];
        let pageContent = {};
        
        /**
         * æ£€æŸ¥ç™»å½•çŠ¶æ€
         * å¦‚æœæœªç™»å½•åˆ™è·³è½¬åˆ°ç™»å½•é¡µé¢
         */
        function checkLogin() {
            const isLoggedIn = localStorage.getItem('adminLoggedIn') === 'true';
            document.getElementById('login-container').style.display = isLoggedIn ? 'none' : 'block';
            document.getElementById('admin-container').style.display = isLoggedIn ? 'block' : 'none';
            
            if (isLoggedIn) {
                loadVideos();
                loadPageContent();
            }
        }
        
        /**
         * ç™»å½•
         */
        function login() {
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            // ç®€å•çš„éªŒè¯ï¼Œå®é™…åº”ç”¨ä¸­åº”è¯¥ä½¿ç”¨æœåŠ¡å™¨éªŒè¯
            if (username === 'admin' && password === 'admin123') {
                localStorage.setItem('adminLoggedIn', 'true');
                checkLogin();
            } else {
                alert('ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯');
            }
        }
        
        /**
         * é€€å‡ºç™»å½•
         */
        function logout() {
            localStorage.removeItem('adminLoggedIn');
            localStorage.removeItem('currentAdminTab'); // æ¸…é™¤ä¿å­˜çš„æ ‡ç­¾
            localStorage.removeItem('adminToken');      // æ¸…é™¤ç™»å½•ä»¤ç‰Œ
            checkLogin();
        }
        
        /**
         * åˆ‡æ¢æ ‡ç­¾é¡µ
         * @param {string} tabName - è¦æ˜¾ç¤ºçš„æ ‡ç­¾é¡µåç§°
         * @param {HTMLElement} element - è¢«ç‚¹å‡»çš„æ ‡ç­¾å…ƒç´ 
         */
        function switchTab(tabName, element) {
            // ä¿å­˜å½“å‰æ ‡ç­¾åˆ°æœ¬åœ°å­˜å‚¨
            localStorage.setItem('currentAdminTab', tabName);
            
            // æ›´æ–°æ ‡ç­¾çŠ¶æ€
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            if (element) {
                element.classList.add('active');
            }
            
            // æ›´æ–°é¡µé¢æ ‡é¢˜
            const titles = {
                'videos': 'è§†é¢‘ç®¡ç†',
                'settings': 'ç½‘ç«™è®¾ç½®'
            };
            document.getElementById('currentPageTitle').textContent = titles[tabName];
            
            // éšè—æ‰€æœ‰å†…å®¹åŒºåŸŸ
            document.querySelectorAll('.tab-content').forEach(content => {
                content.style.display = 'none';
            });
            
            // æ˜¾ç¤ºé€‰ä¸­çš„å†…å®¹åŒºåŸŸ
            const selectedTab = document.getElementById(tabName + '-tab');
            if (selectedTab) {
                selectedTab.style.display = 'block';
                
                // å¦‚æœç‚¹å‡»çš„æ˜¯ç½‘ç«™è®¾ç½®ï¼Œè‡ªåŠ¨æ˜¾ç¤ºç¬¬ä¸€ä¸ªè®¾ç½®é¡µé¢
                if (tabName === 'settings') {
                    // æ¿€æ´»ç¬¬ä¸€ä¸ªå­èœå•
                    const firstSubmenuItem = document.querySelector('.submenu-item');
                    firstSubmenuItem.classList.add('active');
                    
                    // æ˜¾ç¤ºé¦–é¡µè®¾ç½®å†…å®¹
                    document.querySelectorAll('.settings-content').forEach(content => {
                        content.classList.remove('active');
                    });
                    document.getElementById('index-settings').classList.add('active');
                    
                    // æ›´æ–°é¡µé¢æ ‡é¢˜
                    document.getElementById('currentPageTitle').textContent = 'é¦–é¡µè®¾ç½®';
                }
            }
            
            autoHideSidebar();
        }
        
        // ä¿®æ”¹è§†é¢‘åŠ è½½å‡½æ•°ï¼Œä½¿ç”¨ content.json
        async function loadVideos() {
            console.log('Loading videos...');
            try {
                const response = await fetch('content.json');
                console.log('Response status:', response.status);
                
                if (!response.ok) {
                    throw new Error('è·å–è§†é¢‘åˆ—è¡¨å¤±è´¥');
                }
                
                const content = await response.json();
                console.log('Loaded videos:', content.videos);
                
                // æ›´æ–°è§†é¢‘ç½‘æ ¼
                const videoGrid = document.querySelector('.video-grid');
                if (!videoGrid) {
                    console.error('Video grid element not found');
                    return;
                }
                
                videoGrid.innerHTML = '';
                
                if (content.videos.length === 0) {
                    videoGrid.innerHTML = `
                        <div class="video-card">
                            <div class="card-body">
                                <p style="text-align: center;">æš‚æ— è§†é¢‘</p>
                            </div>
                        </div>
                    `;
                    return;
                }
                
                content.videos.forEach(video => {
                    // ç¡®ä¿è§†é¢‘ URL æ ¼å¼æ­£ç¡®
                    const videoUrl = video.url.startsWith('/') ? video.url : '/' + video.url;
                    
                    const videoCard = document.createElement('div');
                    videoCard.className = 'video-card';
                    videoCard.innerHTML = `
                        <div class="video-checkbox-wrapper">
                            <input type="checkbox" class="video-checkbox" value="${video.id}">
                        </div>
                        <div class="card-body">
                            <div class="video-wrapper">
                                <video src="${videoUrl}" controls preload="metadata">
                                    <source src="${videoUrl}" type="video/mp4">
                                    æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ ‡ç­¾
                                </video>
                            </div>
                            <div class="video-info">
                                <div class="video-title">${video.title}</div>
                                <div class="video-description">${video.description || 'æ— '}</div>
                            </div>
                            <div class="action-buttons">
                                <button class="btn btn-danger" onclick="deleteVideo('${video.id}')">
                                    <i class="fas fa-trash"></i> åˆ é™¤
                                </button>
                            </div>
                        </div>
                    `;
                    videoGrid.appendChild(videoCard);
                });
            } catch (error) {
                console.error('åŠ è½½è§†é¢‘åˆ—è¡¨å¤±è´¥:', error);
                // æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ç»™ç”¨æˆ·
                const videoGrid = document.querySelector('.video-grid');
                if (videoGrid) {
                    videoGrid.innerHTML = `
                        <div class="video-card">
                            <div class="card-body">
                                <p style="text-align: center; color: red;">
                                    åŠ è½½å¤±è´¥: ${error.message}
                                </p>
                            </div>
                        </div>
                    `;
                }
            }
        }
        
        // åŠ è½½é¡µé¢å†…å®¹
        async function loadPageContent() {
            try {
                const response = await fetch('content.json');
                if (response.ok) {
                    pageContent = await response.json();
                    
                    // å¡«å……è¡¨å•
                    document.getElementById('index-title').value = pageContent.indexTitle || 'å‘±å‘±åŸºåœ°';
                    document.getElementById('index-date-text').value = pageContent.indexDateText || 'æ•™ç¨‹åˆé›†';
                    document.getElementById('index-password-placeholder').value = pageContent.indexPasswordPlaceholder || 'è¾“å…¥å¯†ç è§‚çœ‹';
                    document.getElementById('index-get-password-btn').value = pageContent.indexGetPasswordBtn || 'è·å–å¯†ç ';
                    document.getElementById('password-title').value = pageContent.passwordTitle || 'è§£é”å¯†ç ';
                    document.getElementById('password-description').value = pageContent.passwordDescription || 'ç‚¹å‡»"å¼€å§‹è§£é”"ï¼Œè§‚çœ‹æ¿€åŠ±å¹¿å‘Šåè‡ªåŠ¨è§£é”å¯†ç ğŸ”“ï¼';
                    document.getElementById('password-note').value = pageContent.passwordNote || '(æ›´æ–°ä¸æ˜“ï¼Œè°¢è°¢æ”¯æŒï¼)';
                    document.getElementById('password-unlock-btn').value = pageContent.passwordUnlockBtn || 'å¼€å§‹è§£é”';
                    document.getElementById('ad-title').value = pageContent.adTitle || 'è§‚çœ‹å¹¿å‘Š';
                    document.getElementById('ad-complete-text').value = pageContent.adCompleteText || 'å¹¿å‘Šè§‚çœ‹å®Œæˆï¼Œæ‚¨çš„å¯†ç æ˜¯:';
                    document.getElementById('videos-title').value = pageContent.videosTitle || 'è§†é¢‘æ•™ç¨‹åˆé›†';
                    document.getElementById('videos-search-placeholder').value = pageContent.videosSearchPlaceholder || 'æœç´¢è§†é¢‘...';
                    document.getElementById('videos-category-beginner').value = pageContent.videosCategoryBeginner || 'æœ€æ–°';
                    document.getElementById('videos-category-advanced').value = pageContent.videosCategoryAdvanced || 'å¾€æœŸ';
                    document.getElementById('videos-no-video').value = pageContent.videosNoVideo || 'æš‚æ— è§†é¢‘';
                }
            } catch (error) {
                console.error('è·å–é¡µé¢å†…å®¹å¤±è´¥:', error);
            }
        }
        
        // ä¿å­˜é¡µé¢å†…å®¹
        async function saveContent() {
            try {
                const content = {
                    indexTitle: document.getElementById('index-title').value,
                    indexDateText: document.getElementById('index-date-text').value,
                    indexPasswordPlaceholder: document.getElementById('index-password-placeholder').value,
                    indexGetPasswordBtn: document.getElementById('index-get-password-btn').value,
                    passwordTitle: document.getElementById('password-title').value,
                    passwordDescription: document.getElementById('password-description').value,
                    passwordNote: document.getElementById('password-note').value,
                    passwordUnlockBtn: document.getElementById('password-unlock-btn').value,
                    adTitle: document.getElementById('ad-title').value,
                    adCompleteText: document.getElementById('ad-complete-text').value,
                    videosTitle: document.getElementById('videos-title').value,
                    videosSearchPlaceholder: document.getElementById('videos-search-placeholder').value,
                    videosCategoryBeginner: document.getElementById('videos-category-beginner').value,
                    videosCategoryAdvanced: document.getElementById('videos-category-advanced').value,
                    videosNoVideo: document.getElementById('videos-no-video').value
                };
                
                const response = await fetch('/api/content', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(content)
                });
                
                if (response.ok) {
                    alert('ä¿å­˜æˆåŠŸï¼');
                } else {
                    alert('ä¿å­˜å¤±è´¥ï¼Œè¯·é‡è¯•ï¼');
                }
            } catch (error) {
                console.error('ä¿å­˜å¤±è´¥:', error);
                alert('ä¿å­˜å¤±è´¥ï¼Œè¯·é‡è¯•ï¼');
            }
        }
        
        // ä¿å­˜ç³»ç»Ÿè®¾ç½®
        async function saveSettings() {
            const password = document.getElementById('admin-password').value;
            const confirmPassword = document.getElementById('confirm-password').value;
            
            if (password !== confirmPassword) {
                alert('ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´');
                return;
            }
            
            if (password && password.length < 6) {
                alert('å¯†ç é•¿åº¦ä¸èƒ½å°‘äº6ä½');
                return;
            }
            
            try {
                const response = await fetch('/api/settings', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ password })
                });
                
                if (!response.ok) {
                    throw new Error('ä¿å­˜è®¾ç½®å¤±è´¥');
                }
                
                alert('è®¾ç½®ä¿å­˜æˆåŠŸ');
                document.getElementById('admin-password').value = '';
                document.getElementById('confirm-password').value = '';
            } catch (error) {
                console.error('ä¿å­˜è®¾ç½®å¤±è´¥:', error);
                alert('ä¿å­˜è®¾ç½®å¤±è´¥: ' + error.message);
            }
        }
        
        // å¤„ç†è§†é¢‘ä¸Šä¼ 
        document.getElementById('uploadForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const title = document.getElementById('upload-title').value;
            const description = document.getElementById('upload-description').value;
            const category = document.getElementById('upload-category').value;
            const videoFiles = document.getElementById('upload-video').files;
            
            // ä¿®æ”¹éªŒè¯é€»è¾‘
            if (!title || videoFiles.length === 0) {  // åªæ£€æŸ¥æ ‡é¢˜å’Œè§†é¢‘æ–‡ä»¶ï¼Œæè¿°æ˜¯å¯é€‰çš„
                alert('è¯·å¡«å†™è§†é¢‘æ ‡é¢˜å¹¶é€‰æ‹©è§†é¢‘æ–‡ä»¶');
                return;
            }
            
            // æ˜¾ç¤ºè¿›åº¦æ¡å’ŒçŠ¶æ€
            const progressBar = document.getElementById('upload-progress-bar');
            const progress = document.getElementById('upload-progress');
            const statusDiv = document.getElementById('upload-status');
            progressBar.style.display = 'block';
            statusDiv.innerHTML = '<p>å¼€å§‹ä¸Šä¼ ï¼Œè¯·ç¨å€™...</p>';
            
            // è®°å½•ä¸Šä¼ æˆåŠŸå’Œå¤±è´¥çš„æ–‡ä»¶
            let successCount = 0;
            let failCount = 0;
            const totalFiles = videoFiles.length;
            
            // é€ä¸ªä¸Šä¼ æ–‡ä»¶
            for (let i = 0; i < videoFiles.length; i++) {
                const videoFile = videoFiles[i];
                const fileTitle = videoFiles.length > 1 ? `${title} (${i+1})` : title;
                
                try {
                    // æ›´æ–°çŠ¶æ€
                    statusDiv.innerHTML += `<p>æ­£åœ¨ä¸Šä¼  ${i+1}/${totalFiles}: ${videoFile.name}</p>`;
                    
                    // åˆ›å»ºè¡¨å•æ•°æ®
                    const formData = new FormData();
                    formData.append('title', fileTitle);
                    formData.append('description', description);
                    formData.append('category', category);
                    formData.append('video', videoFile);
                    
                    // ä½¿ç”¨ Promise åŒ…è£… XHR è¯·æ±‚
                    await new Promise((resolve, reject) => {
                        const xhr = new XMLHttpRequest();
                        xhr.open('POST', '/api/upload', true);
                        
                        xhr.upload.onprogress = function(e) {
                            if (e.lengthComputable) {
                                const percentComplete = (e.loaded / e.total) * 100;
                                progress.style.width = percentComplete + '%';
                            }
                        };
                        
                        xhr.onload = function() {
                            if (xhr.status === 200) {
                                successCount++;
                                statusDiv.innerHTML += `<p style="color: green;">âœ“ ${videoFile.name} ä¸Šä¼ æˆåŠŸ</p>`;
                                resolve();
                            } else {
                                failCount++;
                                statusDiv.innerHTML += `<p style="color: red;">âœ— ${videoFile.name} ä¸Šä¼ å¤±è´¥: ${xhr.statusText}</p>`;
                                reject(new Error(xhr.statusText));
                            }
                        };
                        
                        xhr.onerror = function() {
                            failCount++;
                            statusDiv.innerHTML += `<p style="color: red;">âœ— ${videoFile.name} ä¸Šä¼ å¤±è´¥: ç½‘ç»œé”™è¯¯</p>`;
                            reject(new Error('ç½‘ç»œé”™è¯¯'));
                        };
                        
                        xhr.send(formData);
                    }).catch(error => {
                        console.error('ä¸Šä¼ è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯:', error);
                        // ç»§ç»­ä¸Šä¼ ä¸‹ä¸€ä¸ªæ–‡ä»¶ï¼Œä¸ä¸­æ–­æ•´ä¸ªè¿‡ç¨‹
                    });
                } catch (error) {
                    failCount++;
                    statusDiv.innerHTML += `<p style="color: red;">âœ— ${videoFile.name} ä¸Šä¼ å¤±è´¥: ${error.message}</p>`;
                    console.error('ä¸Šä¼ å¤±è´¥:', error);
                }
            }
            
            // æ‰€æœ‰æ–‡ä»¶å¤„ç†å®Œæ¯•å
            progress.style.width = '100%';
            statusDiv.innerHTML += `<p><strong>ä¸Šä¼ å®Œæˆ: ${successCount}/${totalFiles} ä¸ªæ–‡ä»¶æˆåŠŸ</strong></p>`;
            
            if (successCount > 0) {
                // è‡³å°‘æœ‰ä¸€ä¸ªæ–‡ä»¶ä¸Šä¼ æˆåŠŸï¼Œé‡æ–°åŠ è½½è§†é¢‘åˆ—è¡¨
                loadVideos();
                
                // å¦‚æœå…¨éƒ¨æˆåŠŸï¼Œ3ç§’åå…³é—­å¼¹çª—
                if (successCount === totalFiles) {
                    setTimeout(() => {
                        closeUploadModal();
                    }, 3000);
                }
            }
        });
        
        // æ˜¾ç¤ºä¸Šä¼ å¼¹çª—
        function showUploadModal() {
            document.getElementById('upload-modal').style.display = 'flex';
            document.getElementById('uploadForm').reset();
            document.getElementById('upload-progress-bar').style.display = 'none';
            document.getElementById('upload-progress').style.width = '0%';
            document.getElementById('upload-status').innerHTML = '';
        }

        // å…³é—­ä¸Šä¼ å¼¹çª—
        function closeUploadModal() {
            document.getElementById('upload-modal').style.display = 'none';
        }
        
        /**
         * é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œ
         * æ£€æŸ¥ç™»å½•çŠ¶æ€å¹¶æ¢å¤ä¸Šæ¬¡è®¿é—®çš„æ ‡ç­¾é¡µ
         */
        window.onload = function() {
            checkLogin();
            
            // ä»æœ¬åœ°å­˜å‚¨è·å–ä¸Šæ¬¡è®¿é—®çš„æ ‡ç­¾é¡µ
            const lastTab = localStorage.getItem('currentAdminTab') || 'videos';
            const tabElement = document.querySelector(`.tab[onclick*="'${lastTab}'"]`);
            if (tabElement) {
                switchTab(lastTab, tabElement);
            }
        };

        /**
         * å»¶è¿ŸåŠ è½½éå…³é”®JavaScript
         * åœ¨é¡µé¢å®Œå…¨åŠ è½½åæ‰§è¡Œæ¬¡è¦åŠŸèƒ½
         */
        window.addEventListener('load', function() {
            // å»¶è¿ŸåŠ è½½è§†é¢‘åˆ—è¡¨
            setTimeout(function() {
                if (typeof loadVideos === 'function' && 
                    document.getElementById('videos-tab').style.display === 'block') {
                    loadVideos();
                }
            }, 100);
        });

        // åˆ é™¤è§†é¢‘å‡½æ•°
        async function deleteVideo(videoId) {
            // æ·»åŠ ç¡®è®¤æç¤º
            if (!confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªè§†é¢‘å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚')) {
                return;
            }

            try {
                const response = await fetch(`/api/videos/${videoId}`, {
                    method: 'DELETE'
                });

                if (!response.ok) {
                    throw new Error('åˆ é™¤å¤±è´¥');
                }

                // åˆ é™¤æˆåŠŸåé‡æ–°åŠ è½½è§†é¢‘åˆ—è¡¨
                loadVideos();
                alert('åˆ é™¤æˆåŠŸ');
            } catch (error) {
                console.error('åˆ é™¤è§†é¢‘å¤±è´¥:', error);
                alert('åˆ é™¤å¤±è´¥: ' + error.message);
            }
        }

        // å…¨é€‰/å–æ¶ˆå…¨é€‰
        function toggleSelectAll() {
            const selectAll = document.getElementById('select-all');
            const checkboxes = document.querySelectorAll('.video-checkbox');
            checkboxes.forEach(cb => {
                cb.checked = selectAll.checked;
            });
        }

        // æ‰¹é‡åˆ é™¤åŠŸèƒ½
        async function deleteSelectedVideos() {
            const checkboxes = document.querySelectorAll('.video-checkbox:checked');
            if (checkboxes.length === 0) {
                alert('è¯·é€‰æ‹©è¦åˆ é™¤çš„è§†é¢‘');
                return;
            }

            if (!confirm(`ç¡®å®šè¦åˆ é™¤é€‰ä¸­çš„ ${checkboxes.length} ä¸ªè§†é¢‘å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚`)) {
                return;
            }

            const videoIds = Array.from(checkboxes).map(cb => cb.value);
            let successCount = 0;
            let failCount = 0;

            for (const id of videoIds) {
                try {
                    const response = await fetch(`/api/videos/${id}`, {
                        method: 'DELETE'
                    });

                    if (response.ok) {
                        successCount++;
                    } else {
                        failCount++;
                    }
                } catch (error) {
                    console.error('åˆ é™¤è§†é¢‘å¤±è´¥:', error);
                    failCount++;
                }
            }

            // é‡æ–°åŠ è½½è§†é¢‘åˆ—è¡¨
            loadVideos();
            
            // æ˜¾ç¤ºç»“æœ
            alert(`åˆ é™¤å®Œæˆï¼š${successCount} ä¸ªæˆåŠŸï¼Œ${failCount} ä¸ªå¤±è´¥`);
        }

        // æ·»åŠ åˆ‡æ¢è®¾ç½®é¡µé¢çš„å‡½æ•°
        function switchSettingsTab(tabName, event) {
            // é˜»æ­¢äº‹ä»¶å†’æ³¡ï¼Œé¿å…è§¦å‘çˆ¶çº§çš„ç‚¹å‡»äº‹ä»¶
            event.stopPropagation();
            
            // æ›´æ–°å­èœå•é¡¹çš„æ¿€æ´»çŠ¶æ€
            document.querySelectorAll('.submenu-item').forEach(item => {
                item.classList.remove('active');
            });
            event.currentTarget.classList.add('active');
            
            // æ›´æ–°è®¾ç½®å†…å®¹çš„æ˜¾ç¤º
            document.querySelectorAll('.settings-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(`${tabName}-settings`).classList.add('active');
            
            // æ›´æ–°é¡µé¢æ ‡é¢˜
            const titles = {
                'index': 'é¦–é¡µè®¾ç½®',
                'password': 'å¯†ç é¡µé¢è®¾ç½®',
                'ad': 'å¹¿å‘Šé¡µé¢è®¾ç½®',
                'videos': 'è§†é¢‘é¡µé¢è®¾ç½®'
            };
            document.getElementById('currentPageTitle').textContent = titles[tabName];
            
            // ç¡®ä¿"ç½‘ç«™è®¾ç½®"èœå•ä¿æŒæ¿€æ´»çŠ¶æ€
            document.querySelector('.tab[onclick*="settings"]').classList.add('active');
        }

        // æ·»åŠ åˆ‡æ¢ä¾§è¾¹æ çš„å‡½æ•°
        function toggleSidebar() {
            const sidebar = document.querySelector('.sidebar');
            const overlay = document.querySelector('.sidebar-overlay');
            sidebar.classList.toggle('active');
            overlay.classList.toggle('active');
        }

        // åœ¨å°å±å¹•ä¸Šç‚¹å‡»èœå•é¡¹åè‡ªåŠ¨æ”¶èµ·ä¾§è¾¹æ 
        function autoHideSidebar() {
            if (window.innerWidth <= 768) {
                toggleSidebar();
            }
        }
    </script>
</body>
</html> 
